<!DOCTYPE html>
<html>
	{% include 'head.html' %}
	<body class="x-light-grey" onload="__init__()">
		<header class="x-white x-container x-border" style="padding-left: 10%;padding-right: 10%;">
			<div class="">
				<div class="x-container x-col l4 ">
					<img src="../static/img/rapidlogo1.jpg" class="x-image" style="max-width: 15%;">
				</div>
				<div class="x-container x-padding-large x-col l8 ">
					<div class="x-container">
						<!-- <img src="../static/img/user.png" class="x-img x-circle x-right" style="max-width:7%"> -->
						<span class="x-container x-right">
							<button class="x-btn x-border x-round x-border-green x-hover-green" onclick="spreadsheet_manager()"> <b class="x-text-green fa fa-file-excel-o"></b> Spreadsheet Manager</button>&nbsp;&nbsp;&nbsp;&nbsp;
							<button class="x-btn x-border x-round">
								{{USER_DATA['name']}} <b>|</b> <i>{{USER_DATA['rcu']}}:{{USER_DATA['pcu']}}</i> <b>|</b> {{USER_DATA['job']}}
								<span class="x-text-yellow fa fa-user"></span>
							</button>
							<button class="x-btn x-border x-round" onclick="logout()"> <span class="x-text-red fa fa-power-off"></span> Logout</button>
						</span>
					</div>
				</div>
			</div>
		</header>
		<header class="x-white x-container" style="padding-left: 10%;padding-right: 10%;">
			<span class="">
				<button style="display:none" class="top_tab x-button _x-round-large x-padding-large x-text-black" onclick="go_tab(0)">
					<b class="x-text-teal fa fa-home"></b>&nbsp;&nbsp; Home
				</button>
				<button class="top_tab x-button _x-round-large x-padding-large x-text-black" onclick="go_tab(1)">
					<b class="x-text-teal fa fa-users"></b>&nbsp;&nbsp; Profiling
				</button>
				{% if USER_DATA['job'] != "Enumerator" %}
				<button class="top_tab x-button _x-round-large x-padding-large x-text-black" onclick="go_tab(2)">
					<b class="x-text-teal fa fa-newspaper-o"></b>&nbsp;&nbsp; Data Capture Forms
				</button>
				<button class="top_tab x-button _x-round-large x-padding-large x-text-black" onclick="go_tab(3)">
					<b class="x-text-teal fa fa-cog"></b>&nbsp;&nbsp; Settings
				</button>
				{% else %}
				<button class="x-button _x-round-large x-padding-large x-text-black">
					<b class="x-text-teal fa fa-users"></b>&nbsp;&nbsp;
					Some features are restricted
				</button>
				{% endif %}
			</span>
			<span class="x-right x-padding">
				<input style="width: 25%;" onkeyup="" class="x-padding x-right x-center x-input x-animate-input x-border x-round-xxlarge" placeholder="&#128269;" type="" name="">
			</span>
		</header>
		<br>

		 <!-- CONTENT BODY ---------------------------------------- -->
		<div class="x-container"  style="padding-left: 10%;padding-right: 10%;">
			<div class="body_content x-padding x-round" style="display:block;">
				{% include 'home/maintenance.html' %}
			</div>
			<div class="body_content x-padding x-round" style="display:none;">
				{% include 'home/profiling.html' %}
			</div>
			<!-- RESTRICTIONFOR ENUMERATORS -->
			{% if USER_DATA['job'] != "Enumerator" %} 
			<div class="body_content x-padding x-round" style="display:none;">
				{% include 'home/data_capture_forms.html' %}		
				<!-- {% include 'home/maintenance.html' %} -->
			</div>
			<div class="body_content x-padding x-round" style="display:none;">
				{% include 'home/settings.html' %}		
				<!-- {% include 'home/maintenance.html' %} -->
			</div>
			{% endif %}
		</div>
		<br>
		<footer class="x-footer x-container x-light-grey" style=" position: fixed; bottom: 0; width: 100%;">
			<span class="x-small x-text-grey x-left">DTI RAPID NPCO 2022</span>
			<span class="x-small x-text-grey x-right">DTI RAPID NPCO 2022</span>
		</footer>
	</body>
	<style>
		#conso1_chart{width: 100%;height: 100vh;}
	</style>

	<!-- ============================================================================= -->
	<div id="__TEMPMODAL_EXCEL_" style="display:none;">
		<div class="x-padding x-container x-bottombar">
			<b class="x-text-blue x-xlarge">IMPORT</b>
			<div class="x-container">
				<span>Profiling Form</span>
				<div class="x-container x-row">
					<div class="x-container x-col l4 ">
						<input id="export_file_profiling_name_path" class="x-input x-btn" type="file" name="">
					</div>
					<div class="x-container x-col l4 ">
						<select id="export_file_profiling_type" class="x-input x-select">
							<option> Form A (Farmers)</option>
							<option> Form B (Farmers Org)</option>
							<option> Form C (MSME)</option>
							<option>! Auto Detect !</option>
						</select>
					</div>
					<div class="x-container x-col l4 ">
						<button onclick="temp_action()" class="x-btn x-text-blue x-hover-blue x-border x-border-blue">
							<b>Import Spreadsheet</b> | <span class="fa fa-upload"></span>
						</button>
					</div>
				</div>
			</div>
			<hr>
			<div class="x-container">
				<span>Data Capture Form Form</span>
				<div class="x-container x-row">
					<div class="x-container x-col l4 ">
						<input id="export_file_dcf_name" class="x-input x-btn" type="file" name="">
					</div>
					<div class="x-container x-col l4 ">
						<select id="export_file_dcf_type" class="x-input x-select">
							<option>DIP Preparational and Approval (Old Version)</option>
							<option>Trade Promotion</option>
							<option>Product Development</option>
							<option>Matching Grant Tracker</option>
							<option>Enablers Activity Tracker</option>
							<option>Equity Tracker</option>
							<option>DIP Preparation Tracker</option>
							<option>! Auto Detect !</option>
						</select>
					</div>
					<div class="x-container x-col l4 ">
						<button onclick="temp_action()" class="x-btn x-text-blue x-hover-blue x-border x-border-blue">
							<b>Import Spreadsheet</b> | <span class="fa fa-upload"></span>
						</button>
					</div>
				</div>
			</div>
		</div>
		<br>
		<div class="x-padding x-container">
			<b class="x-text-orange x-xlarge">EXPORT</b><br>
			<i>
				Note : Exporting may take a while to process. we the system will alert you once its ready
			</i>
			<hr>
				<span>Exporting spreadsheet from your designated area (Region):</span> [<b>{{USER_DATA['rcu']}}</b>]
			<hr>
			<div class="x-container">
				<span>Profiling Form</span>
				<div class="x-container x-row">
					<div class="x-container x-col l6 ">
						<select class="x-input x-select">
							<option> Form A (Farmers)</option>
							<option> Form B (Farmers Org)</option>
							<option> Form C (MSME)</option>
							<option>! Auto Detect !</option>
						</select>
					</div>
					<div class="x-container x-col l6 ">
						<button onclick="temp_action()" class="x-btn x-text-orange x-hover-orange x-border x-border-orange">
							<b>Export Spreadsheet</b> | <span class="fa fa-download"></span>
						</button>
					</div>
				</div>
			</div>
			<hr>
			<div class="x-container">
				<span>Data Capture Form Form</span>
				<div class="x-container x-row">
					<div class="x-container x-col l6 ">
						<select class="x-input x-select">
							<option>DIP Preparational and Approval (Old Version)</option>
							<option>Trade Promotion</option>
							<option>Product Development</option>
							<option>Matching Grant Tracker</option>
							<option>Enablers Activity Tracker</option>
							<option>Equity Tracker</option>
							<option>DIP Preparation Tracker</option>
							<option>! Auto Detect !</option>
						</select>
					</div>
					<div class="x-container x-col l6 ">
						<button onclick="temp_action()" class="x-btn x-text-orange x-hover-orange x-border x-border-orange">
							<b>Export Spreadsheet</b> | <span class="fa fa-download"></span>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">

		// _INIT_()
		// async function _INIT_(){
		// 	println(" * Initialized")
		// 	await new Promise(init); // WAIT FOR n.. SECONDS
		// }

		init()
		function init(){
			{% if {} != "Enumerator" %} //JINJA: RESTRICTION USER
				load_users();
				// return_data_to_serv()
				set_ls_rcu();
			{% endif %} // JINJA: RESTRICTION USER
			// get_list_file(); // For Inititalizing list in profiling/profiling_farmers.html
			return_data_to_serv()
		}
		// ================================================

		let ALL_DATA = undefined;
		let ALL_DATA_CONSO = {};

		function logout() {
			redirectto("/logout");
		}

		function __init__(){
			// conso()
			var tab_id = (window.location.href).split("#")[1];
			go_tab(parseInt(tab_id));
		}


		var _temp_modal_excel = $ID('__TEMPMODAL_EXCEL_')
		var excel_mngr = _temp_modal_excel.innerHTML
		var spredsh_mngr = undefined
		_temp_modal_excel.remove()
		function spreadsheet_manager(){
			_temp_modal_excel.remove()
			spredsh_mngr = $dialog({
				title : "Spreadsheet Manager",
				subtitle : "Spreadsheet Manager for Profiling and Data Capture Forms",
				content : excel_mngr
			})
			spredsh_mngr.show()
		}
		function temp_action(){
			spredsh_mngr.remove()
		}


		function conso(){
			$send({
				action : '/api/conso',
				method : POST,
				func : function (res) {
					ALL_DATA = JSON.parse(res)
					// dash_conso1(ALL_DATA)
					// get_farmer_cards()
					// $show_view('profile-farmer','content-dash')/////////////////////////////
				}
			});
		}

		function go_tab(_index){
			var tabs = $CLASS("top_tab");
			var body_content = $CLASS("body_content") ; // FOR BODY CONTENT
			for (var i = 0; i < tabs.length; i++) {
				tabs[i].classList.remove("x-bottombar","x-border-teal");
				body_content[i].style.display = "none";  // FOR BODY CONTENT
			}
			tabs[_index].classList.add("x-bottombar","x-border-teal")
			body_content[_index].style.display = "block" // FOR BODY CONTENT
			
			redirectto("#"+_index)

		}

		function staytuned(){
			var stay_tuned = $dialog({
				title : "Stay Tuned",
				type : "warning",
				subtitle : "Feature under Development",
				content : "Please stay tuned as we configure this feature for you. it wont take long",
			})

			stay_tuned.show()
		}

			// Tawk_API.visitor = {
			// 	'name' : "{{USER_DATA['name']}}",
			// 	'email' : "{{USER_DATA['name']}}",
			// 	'hash' :" {{USER_DATA['name']}}"
			// };
		// var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
		// Tawk_API.onLoad = function(){
		// 	Tawk_API.setAttributes({
		// 		'name' : "{{USER_DATA['name']}}",
		// 		'email': "{{USER_DATA['email']}}",
		// 		'hash' : 'hash-value'
		// 	}, function (error) {
				
		// 	});

		// };
		

		// var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
		// s1.async=true;
		// s1.src='https://embed.tawk.to/62f9c9c554f06e12d88ea549/1gafrob5j';
		// s1.charset='UTF-8';
		// s1.setAttribute('crossorigin','*');
		// s0.parentNode.insertBefore(s1,s0);



			
			// alert(JSON.stringify(Tawk_API))
	</script>	
</html>
