						<div class=" x-container x-white">
							<h3 class="x-padding x-text-teal">Profile List</h3>
							<div class="x-row">
								<div class="x-bottombar x-border-teal x-row">
									<div class="x-btn x-left x-container ">
										<i class="x-text-grey">Displaying <b id="prof_farmer_count">0</b> File/s</i>
									</div>
									<div class="x-button x-right x-text-orange x-hover-orange" onclick="export_farmer_excel()">
										<b>Export Data</b> | <span class="fa fa-download"></span>
									</div>
									<div class="x-button x-right x-text-blue x-hover-blue" onclick="import_farmer_excel()">
										<b>Import Spreadsheet</b> | <span class="fa fa-upload"></span>
									</div>
								</div>

								<div class="x-container">
									<select id="dash_sel_region" class="x-input x-select x-col l2 x-light-grey x-round-xlarge" onchange="get_ls_prov(this.value)">
										<option type="" value="all" selected>All Region</option>
									</select>
									<select id="dash_sel_prov" class="x-input x-select x-col l2 x-light-grey x-round-xlarge" disabled onchange="get_ls_city(this.value)">
										<option type="" value="all" selected>All Provinces</option>
									</select>
									<select id="dash_sel_city" class="x-input x-select x-col l2 x-light-grey x-round-xlarge" disabled onchange="get_ls_brgy(this.value)">
										<option type="" value="all" selected>All Cities/Municipalities</option>
									</select>
									<select id="dash_sel_brgy" class="x-input x-select x-col l2 x-light-grey x-round-xlarge" disabled  onchange="get_ls_all_area(this.value)">
										<option type="" value="all" selected>All Brgy</option>
									</select>
									<button class="x-input x-btn x-col l1 x-green x-round-xlarge" onclick="conso_area()">
										Filter <span class="fa fa-filter"></span>
									</button>
								</div>
							</div>
							<hr>
							<div id="profile_list" class="x-row" style=";overflow-y:scroll;height: 60vh;">
								------- List Of Profiles ------
							</div>
						</div>
						<script type="text/javascript">
							let ALL_FARMERS = []
							let FILTER_SEL_REG, FILTER_SEL_PROV, FILTER_SEL_CITY, FILTER_SEL_BRGY;

							function export_farmer_excel(argument) {
								staytuned()
							}

							function import_farmer_excel(argument) {
								staytuned()
							}

							
							get_ls_region()
							function get_ls_region(){
								var ls_all_reg = '<option type="" value="all" selected>All Regions</option>'
								for(key in ALL_LOCATION){
									ls_all_reg += '<option value="'+key+'">'+key+'</option>'
								}
								$ID("dash_sel_region").innerHTML = ls_all_reg
							}

							function get_ls_prov(reg){
								var ls_all_prov = '<option type="" value="all" selected>All Provinces</option>'
								SEL_REG = reg
								for(key in ALL_LOCATION[reg]["province_list"]){ls_all_prov += '<option value="'+key+'">'+key+'</option>'}
								$ID("dash_sel_prov").innerHTML = ls_all_prov;$ID("dash_sel_prov").disabled = false

							}

							function get_ls_city(prov){
								var ls_all_city = '<option type="" value="all" selected>All Cities/Municipalities</option>'
								SEL_PROV = prov
								for(key in ALL_LOCATION[SEL_REG]["province_list"][prov]['municipality_list']){ls_all_city += '<option value="'+key+'">'+key+'</option>'}
								$ID("dash_sel_city").innerHTML = ls_all_city;$ID("dash_sel_city").disabled = false
							}

							function get_ls_brgy(city){
								var ls_all_brgy = '<option type="" value="all" selected>All Barangay</option>'
								SEL_CITY = city
								var brgys = ALL_LOCATION[SEL_REG]["province_list"][SEL_PROV]['municipality_list'][city]["barangay_list"]
								for (var i = 0; i < brgys.length; i++) {ls_all_brgy += '<option value="'+brgys[i]+'">'+brgys[i]+'</option>'}
								$ID("dash_sel_brgy").innerHTML = ls_all_brgy;$ID("dash_sel_brgy").disabled = false
							}

							function get_ls_all_area(brgy){SEL_BRGY=brgy}

							function staytuned(){
								var stay_tuned = $dialog({
									title : "Stay Tuned",
									type : "warning",
									subtitle : "Feature under Development",
									content : "Please stay tuned as we configure this feature for you. it wont take long",
								})

								stay_tuned.show()
							}

							function get_list_file(){ // For Inititalizing list in profiling/profiling_farmers.html
								$ID("profile_list").innerHTML = ""
								println(" * Getting List of Profiles")
								$send({
									action:"/list_all_profile",
									method: POST,
									func : function(res){
										ls_file_farmer = JSON.parse(res)
										// println(ls_file_farmer)
										$ID("profile_list").innerHTML = ""
										for (var i = 0; i < ls_file_farmer.length; i++) {
											// println(ls_file_farmer[i])
											get_profile(ls_file_farmer[i], ls_file_farmer.length, ls_file_farmer)
										}
									}
								})
							}


							function conso_area(){
								FILTER_SEL_REG = $ID("dash_sel_region").value
								FILTER_SEL_PROV = $ID("dash_sel_prov").value
								FILTER_SEL_CITY = $ID("dash_sel_city").value
								FILTER_SEL_BRGY = $ID("dash_sel_brgy").value

								$ID("prof_farmer_count").innerHTML = 0 // LIST NUMBER

								$ID("total_num_farmer").innerHTML = 0 // DASHBOARD

								println(FILTER_SEL_REG, FILTER_SEL_PROV, FILTER_SEL_CITY, FILTER_SEL_BRGY)
								get_list_file()
								// conso_all()
							}

							function filterByArea(person){
								var _prk= person.addr_street_purok_sitio 
								var _city = person.addr_city
								var _prov= person.addr_prov
								var _reg = person.addr_region
								var _brg = person.addr_brgy

								if(FILTER_SEL_REG=="all" ||FILTER_SEL_REG==undefined){
									return true
								}

								if(_reg==FILTER_SEL_REG){
									if(FILTER_SEL_PROV=="all" ||FILTER_SEL_PROV==undefined){
										return true
									}
									else{
										if(_prov==FILTER_SEL_PROV){
											if(FILTER_SEL_CITY=="all" ||FILTER_SEL_CITY==undefined){
												return true
											}
											else{
												if(_city==FILTER_SEL_CITY){
													if(FILTER_SEL_BRGY=="all" ||FILTER_SEL_BRGY==undefined){
														return true
													}
													else{
														if(_brg==FILTER_SEL_BRGY){
															return true
														}
														else{
															return false
														}
													}
												}
											}
										}
									}
								}
								else{
									return false
								}
							}

							function get_profile(_file_name,total_recors_farmer, f_FILE){
								var total_recors_farmer_counter = 0
								var FILTER_total_recors_farmer_counter = 0
								ALL_FARMERS = []

								$send({
									action:"/get_profile",
									method: POST,
									// a_sync : true,
									data : $DATA({"profile_file_name":_file_name}),
									err : function (e){
										// println("error")
									},
									func : function(res){
										if(res == `"ERROR"`){
											println("res oh")
											println(res)
											return
										}
										try{
											var alldata_farmer = JSON.parse(JSON.parse(res))
											
											if(filterByArea(alldata_farmer)){
												// var file_profile = alldata_farmer['profile']
												var file_profile = alldata_farmer
												var person = file_profile
												var prof_pic = "../static/img/user.png"

												try{
													prof_pic = person.farmer_img_base64
													if(prof_pic=="" || prof_pic==" " || prof_pic==undefined || prof_pic==null || prof_pic=="null"){
														prof_pic = "../static/img/user.png"
													}
												}catch(e){
													console.log(" - Error in base64 images ")
												}
												// println(person)

												$ID("profile_list").innerHTML += `
												<div class="x-row x-hover-teal x-padding" id="`+person.farmer_code+`" onclick="get_ind('`+person.farmer_code+`')">
													<div class='x-row'>
														<div class="x-col l1">
															<!-- <img loading="lazy" id="img_`+person.farmer_code+`" src="`+prof_pic+`" class="x-image x-round" style="max-width:100%"> -->
														</div>
														<div class="x-col l3 x-container">
															<b class="">`+person.farmer_name+`</b><br>
															<span class="x-tiny">
																<span>`+person.addr_street_purok_sitio+`</span> 
																<span>`+person.addr_city+`</span> 
																<span>`+person.addr_prov+`</span> 
																<span>R:`+person.addr_region+`</span> 
															</span><br>
														</div>
														<div class="x-col l3 x-container">
															<i class=""><span>`+person["farmer-primary_crop"]+`</span> </i><br>
															<span class="x-tiny">-----</span><br>
														</div>
														<div class="x-col l4 x-container x-center">
															<span class="x-tiny">Form Completion</span><br>
															<b class="x-large">--%</b><br>
														</div>
													</div>
													<span class="x-tiny x-text-grey x-right"><b>`+total_recors_farmer_counter+`</b>-`+person.farmer_code+`</span>

												</div>`
												var person = file_profile.profile
												if(total_recors_farmer_counter>=total_recors_farmer-1 ){
													// alert("Done Loading ["+total_recors_farmer_counter+"] files")
													// get_prof_imgs(f_FILE)
													conso_all() // IF DONE in POPULATING list . CREATING DASHBOARD @ profiling_dashboard.html
												}
												$ID("prof_farmer_count").innerHTML = FILTER_total_recors_farmer_counter
												FILTER_total_recors_farmer_counter += 1

											}

											ALL_FARMERS.push(alldata_farmer) // Appended list of farmers for dashboarding
											$ID("total_num_farmer").innerHTML = total_recors_farmer_counter


										}catch(e){
											println(" Error in data = "+e)
										}
										total_recors_farmer_counter+= 1
									}
								})
							}

							function get_ind(fid){
								// println(fid)
								loading.show()
								$send({
									action : "/get_full_profile_str",
									// action : "/get_full_profile",
									data : $DATA({"profile_file_name":fid+"@profile"}),
									method : POST,
									func : function (res) {
										view_farmer_data(res)
										// println(JSON.parse(res))
										// println(res)
										loading.hide()

									}
								})
							}

							function view_farmer_data(res){
								var person = JSON.parse(JSON.parse(res))
								println(person)
								var farmer_dialog_info = $dialog({
									title : person.farmer_name,
									subtitle :( `
										<span class="x-tiny">
											<span>`+person.addr_street_purok_sitio+`</span> 
											<span>`+person.addr_city+`</span> 
											<span>`+person.addr_prov+`</span> 
											<span>R:`+person.addr_region+`</span> 
										</span>
									`),
									content : (`
										<h1><i>Under Development</i></h1>
									`),
									buttons : ["Okay"]
								})
								farmer_dialog_info.elements[0].style.width = "70vw"
								farmer_dialog_info.show()
							}

							function get_prof_imgs(ls_file){  // Lazy Load for Profile Images After profrile list completely lodaded
								// if(ls_file[i]==null){}
								for (var i = 0; i < ls_file.length; i++) {
									$send({
										action : "/api/get_imgProf/"+ls_file[i],
										method : POST,
										func : function(res) {
											try{
												var im_res = JSON.parse(res)
												// println(im_res)
												var ids_ = (im_res.f_name).split(".")[0]
												var prof_pic = im_res.base_64
												if(prof_pic=="" || prof_pic==" " || prof_pic==undefined){
													prof_pic = "../static/img/user.png"
												}
											// println("img_"+ids_)
												$ID("img_"+ids_).src = prof_pic
											}
											catch(e){
												println(" ERROR in getting image for img_"+ids_ +" || ERROR : "+e)
											}
										}
									})
								}
							}


							// function get_user(_file_name){
							// 	$send({
							// 		action:"/get_profile",
							// 		method: POST,
							// 		data : $DATA({"profile_file_name":_file_name}),
							// 		func : function(res){
							// 			var file_profile = JSON.parse(res)
							// 			println(file_profile)
							// 			var person = file_profile.profile
							// 			var prof_pic = person.farmer_img_base64
							// 			if(prof_pic=="" || prof_pic==" " || prof_pic==undefined){
							// 				prof_pic = "../static/img/user.png"
							// 			}
							// 			println(person)
							// 			$ID("profile_list").innerHTML += `
							// 			<div class="x-row x-padding" id="`+person.farmer_code+`">
							// 				<div class="x-col l1">
							// 					<img loading="lazy" src="`+prof_pic+`" class="x-image" style="max-width:100%">
							// 				</div>
							// 				<div class="x-col l3 x-container">
							// 					<b class="">`+person.farmer_name+`</b><br>
							// 					<span class="x-tiny">
							// 						<span>`+person.addr_street_purok_sitio+`</span> 
							// 						<span>`+person.addr_city+`</span> 
							// 						<span>`+person.addr_prov+`</span> 
							// 						<span>R:`+person.addr_region+`</span> 
							// 					</span><br>
							// 				</div>
							// 				<div class="x-col l3 x-container">
							// 					<i class=""><span>`+person["farmer-primary_crop"]+`</span> </i><br>
							// 					<span class="x-tiny">-----</span><br>
							// 				</div>
							// 				<div class="x-col l4 x-container x-center">
							// 					<span class="x-tiny">Form Completion</span><br>
							// 					<b class="x-large">--%</b><br>
							// 				</div>
							// 			</div>`
							// 		}
							// 	})
							// }
						</script>